## 13.容器

### 13.1 命令

| 命令                 | 含义                                                                      | 案例                                                           |
| -------------------- | ------------------------------------------------------------------------- | -------------------------------------------------------------- |
| run                  | 从镜像运行一个容器                                                        | docker run ubuntu/bin/echo 'hello-world'                       |
| ls                   | 列出容器                                                                  | docker container ls                                            |
| inspect              | 显示一个或多个容器详细信息                                                | docker inspect                                                 |
| attach               | 要 attach 上去的容器必须正在运行，可以同时连接同一个 container 来共享屏幕 | docker attach                                                  |
| stats                | 显示容器资源使用统计                                                      | docker container stats                                         |
| top                  | 显示一个容器运行的进程                                                    | docker container top                                           |
| update               | 显示一个容器运行的进程                                                    | docker container update                                        |
| port                 | 更新一个或多个容器配置                                                    | docker container port                                          |
| ps                   | 查看当前运行的容器                                                        | docker ps -a -l                                                |
| kill [containerld]   | 终止容器（发送 SIGKILL）                                                  | docker kill [containerld]                                      |
| rm [containerld]     | 删除容器                                                                  | docker rm [containerld]                                        |
| start [containerld]  | 启动已经生成，已经停止的容器文件                                          | docker start [container]                                       |
| stop [containerld]   | 终止容器运行[发送 SIGTERM]                                                | docker stop [containerld]                                      |
| logs [containerld]   | 查看 docker 容器的输出                                                    | docker logs [contanierld]                                      |
| exec [containerld]   | 进入一个正在运行的 docker 容器执行命令                                    | docker container exec -it [containerID]/bin/bash               |
| cp [containerld]     | 从正在运行的 Docker 容器里面，将文件拷贝到本机                            |
| commit [containerld] | 创建一个新镜像来自一个容器                                                | docker commit -a 'zhufeng' -m 'mysql' a404c6c174a2 myniginx:v1 |

### 13.2 启动容器

```
docker run ubuntu /bin/echo 'Hello world'
```

* docker:Docker 的二进制执行文件。
* run:与前面的 docker 组合来运行一个容器。
* ubuntu 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓 Docker Hub 下载公共镜像。
* /bin/echo 'Hello world':在启动的容器里面执行的命令。

Docker 以 ubuntu 镜像创建一个新容器，然后在容器里执行 bin/echo 'Hello world'，然后输出结果

| 参数              | 含义                 |
| ----------------- | -------------------- |
| -l --interactive  | 交互式               |
| -t --tty          | 分配一个伪终端       |
| -d --detach       | 运行容器到后台       |
| -a --attach list  | 附加到运行的容器     |
| -e --env list     | 设置环境变量         |
| -p --publish list | 发布容器端口到主机   |
| -P                | --publish-all        |
| --mount mount     | 挂载宿主机分区到容器 |
| -v,--volumn list  | 挂载宿主机分区到容器 |

### 13.3 查看容器

```
docker ps
docker -a
docker -l
```

* -a 显示所有容器，包括已停止的
* -l 显示最新的那个容器

| 字段         | 含义           |
| ------------ | -------------- |
| CONTAINER ID | 容器 ID        |
| IMAGE        | 使用的镜像     |
| COMMAND      | 使用的命令     |
| CREATED      | 创建时间       |
| STATUS       | 状态           |
| PORTS        | 端口号         |
| NAMES        | 自动分配的名称 |

### 13.4 运行交互式的容器

```
docker run -i -t ubuntu /bin/bash
```

* -t=--interactive 在新容器内指定一个伪终端或终端。
* -i =--tty 允许你对容器内的标准输入（STDIN）进行交互。

我们可以通过运行 exit 命令或者使用 CTRL+D 来退出容器。

### 13.5 后台运行容器

```
docker run --detach centos ping www.baidu.com
docker ps
docker logs --follow ad04d9acde94
docker stop ad04d9acde94
```

### 13.6Kill

```
docker kill 5a5c3a760f61
```

kill 是不管容器同不同意，直接指向`kill-9`,强制终止；stop 的话，首先给容器发送一个`TERM`信号，让容器做一些退出前必须的保护性、安全性操作，然后让容器自动停止运行，如果在一段时间内，容器还是没有停止，再进行 kill-9，强制终止。

### 13.7 删除容器

* docker rm 删除容器
* docker rmi 删除镜像
* docker rm $(docker ps -a -q)

```
docker rm 5a5c3a760f61
```

### 13.8 启动容器

```
docker start [containerId]
```

### 13.9 停止容器

```
docker stop [containerId]
```

### 13.10 进入一个容器

```
docker attach [ containerID]
```

### 13.11 进入一个正在运行中的容器

```
docker container -exec -it [containerID] /bin/bash
```

### 13.12 拷贝文件

```
docker container cp [containerID] /readme.md
```

### 13.13 自动删除

```
docker run --rm ubuntu /bin/bash
```
