## 20. 搭建 LNMP 网站

### 20.1 关闭防火墙

| 功能           | 命令                                |
| -------------- | ----------------------------------- |
| 停止防火墙     | systemctl stop firewalld.service    |
| 永久关闭防火墙 | systemctl disable firewalld.service |

### 20.2 创建自定义网络

```
docker network create lnmp
```

### 20.3 创建 mysql 数据库容器

```
docker run -itd --name lnmp_mysql --net lnmp -p 3306:3306 --mount src=mysql-vol,dst=/var/lib/mysql -e MYSQL_ROOT_APSSWORD=123456 mysql:5.6 --character-set-server=utf8
yum install -y mysql
```

### 20.4 创建所需数据库

```
docker exec lnmp_mysql bash -c 'exec mysql -uroot -p'"$MYSQL_ROOT_PASSWORD" -e"create database wordpress
```

### 20.5 创建 PHP 容器

```
mkdir -p /app/wwroot
docker run -itd --name lnmp_web --net lnmp -p 8888:80 --mount type=bind,src=/app/wwroot,dst=/var/www/html richarvey/nginx-php-fpm
```

### 20.6wordpress

```
cd /opt/src
wget https://wordpress.org/latest.tar.gz
tar -xzvf latest.tar.gz -C /app/wwwroot
http://IP:88/wordpress
http://192.168.20.129.8888/wrodpress/wp-admin/setup-config.php
```
